!function(a,d,g,h){XenForo.QuickReply=function(c){if(0==a("#messageList").length)return console.error("Quick Reply not possible for %o, no #messageList found.",c);var f=XenForo.MultiSubmitFix(c);this.scrollAndFocus=function(){a(g).scrollTop(c.offset().top);d.tinyMCE?d.tinyMCE.editors.ctrl_message_html.focus():a("#QuickReply").find("textarea:first").get(0).focus();return this};c.data("QuickReply",this).bind({AutoValidationBeforeSubmit:function(b){a(b.clickedSubmitButton).is('input[name="more_options"]')&&
(b.preventDefault(),b.returnValue=!0)},AutoValidationComplete:function(b){b.ajaxData._redirectTarget&&(d.location=b.ajaxData._redirectTarget);a('input[name="last_position"]',c).val(b.ajaxData.lastPosition);a('input[name="last_date"]',c).val(b.ajaxData.lastDate);f&&f();c.find("input:submit").blur();new XenForo.ExtLoader(b.ajaxData,function(){a(b.ajaxData.templateHtml).each(function(){this.tagName&&a(this).xfInsert("prependTo",a("#messageList"))})});var e=a("#QuickReply").find("textarea");e.val("");
(e=e.data("XenForo.BbCodeWysiwygEditor"))&&e.resetEditor();d.tinyMCE&&d.tinyMCE.editors.ctrl_message_html.setContent("");d.sessionStorage&&(d.sessionStorage.quickReplyText=null);c.trigger("QuickReplyComplete");return!1}})}}(jQuery,this,document);
